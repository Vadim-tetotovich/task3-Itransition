!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("babel-runtime/core-js/json/stringify"),require("babel-runtime/core-js/object/keys")):"function"==typeof define&&define.amd?define(["babel-runtime/core-js/json/stringify","babel-runtime/core-js/object/keys"],t):e.VueLazyLoadImg=t(e._JSON$stringify,e._Object$keys)}(this,function(e,t){"use strict";function n(e){var t={};return e.keys().forEach(function(n){if(/\.vue$/.test(n)){var i="",a="";/^\.\/[\w\W]*\//.test(n)&&(i=n.split("/").pop()),a=i?i.replace(/\.vue/,""):n.replace(/^\.\//,"").replace(/\.vue/,""),t[a]?c.log("组件库出现多个跟"+a+"一样名称组件，请确保组件库里的各个组件名称不一样","warn"):t[a]=e(n)}}),t}function i(e,t,n,i){var a="";if(i)a=i;else{var r=n||t.perColumnOption;a=c.parseDynamicKeyValue(r,"prop",t.row),a=c.parseEnumeratorValue(r,a,t),a=c.parseFilterValue(r,a,t)}return e("span",{attrs:{class:"vm fwn"},domProps:{innerHTML:a}})}function a(e,t,n){var a=null;switch((n||t.perColumnOption).type){case h:a=i(e,t,n);break;case d:a=function(e,t,n){var a=n||t.perColumnOption,r=c.parseDynamicKeyValue(a,"url",t.row),l=null;return l=n?i(e,t,a):i(e,t),e("a",{attrs:{href:r,target:a.blank?"_blank":"_self"}},[l])}(e,t,n);break;case f:a=function(e,t,n){var i=n||t.perColumnOption,a=i.prop;return a=c.parseDynamicKeyValue(i,"prop",t.row,a),c.dealClickEventFn(i.clickEvent,a,t),e(p,{props:{type:i.btnType||"primary",size:i.btnSize||"small",text:a},nativeOn:{click:function(e){var n=c.parseButtonClickEvent(i,a,t),r=[t.row];c.isObject(i.clickEvent)&&c.isArray(i.clickEvent.params)&&(r=r.concat(i.clickEvent.params)),r.push(e),c.isFunction(n)&&n.apply(t.forebearInstance,r)}}})}(e,t,n);break;case m:a=function(e,t,n){var i=n||t.perColumnOption,a=[];return i.content.forEach(function(n){var r="";n.prop&&(n.label=i.label,r=c.parseDynamicKeyValue(n,"prop",t.row),r=c.parseEnumeratorValue(n,r,t),r=c.parseFilterValue(n,r,t)),a.push(function(e,t,n,i){return e(u,{style:{marginRight:"5px"},props:{type:n,size:i},domProps:{innerHTML:t}})}(e,r,n.type||"success",n.size||"small"))}),e("div",{attrs:{class:"mbt3"}},a)}(e,t,n);break;case b:a=function(e,t,n){var i=n||t.perColumnOption,a=null,r={};return a=c.parseComponentContent(i),r=c.parseComponentParams(i,t),e(a,{props:{row:t.row,params:r}})}(e,t,n);break;default:a=i(e,t,n)}return a}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,function(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}(".dynamic-table .dt-pagination{margin:20px auto}.dynamic-table .el-pagination,.vm{display:inline-block}.vm{vertical-align:middle}.font-color{color:#333;font-weight:400}.dynamic-table .align-left{text-align:left}.dynamic-table .align-center{text-align:center}.dynamic-table .align-right{text-align:right}.dynamic-table .mr5{margin-right:5px}.dynamic-table .mbt3{margin-top:3px;margin-bottom:3px}.dynamic-table .mr7{margin-right:7px}.dynamic-table .mtb3{margin-top:3px;margin-bottom:3px}.dynamic-table .fwn{font-weight:400}a{color:#337ab7;text-decoration:none}",void 0);var r=null,l=function(e){return r||(c.isFunction(e)?void(r=e()):null)},o=null,s=function(e){if(o)return o;if(c.isFunction(e))return o=n(e());return n(require.context("./",!1,/\.vue$/))},c={EumnsMap:null,isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isNumber:function(e){return"[object Number]"===Object.prototype.toString.call(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},log:function(e,t){t?console[t](e):console.log(e)},dealUdefOrNull:function(e){return null!==e&&void 0!==e||(e=""),e},parseMapValue:function(e,t,n){for(var i=n||e.enumsMap,a=i.length,r=0;r<a;r++){var l=i[r];if(+l.key==+t)return l.text}return!1},deepKeyValue:function(e,t){if(/\./.test(e)){for(var n=e.split("."),i="",a=0;a<n.length;a++){var r=n[a];if(0===a){if(!(i=t[r]))return""}else{if(!i)return"";i=i[r]}}return void 0===i?"":i}return this.dealUdefOrNull(t[e])},parseComponentParams:function(e,n){var i=this,a={},r={};return this.isObject(e.content)&&(a=e.content.params||{},t(a).forEach(function(e){var t="";t=/\{\{([^\}]*)\}\}?/g.test(a[e])?i.parseDynamicKeyValue(null,e,n.forebearInstance,a[e]):a[e],r[e]=t})),r},parseDynamicKeyValue:function(e,t,n,i){var a=this,r="",l="",o=/\{\{([^\}]*)\}\}?/g,s=/^%([\w\W]*)%$/;if(r=i||e[t],s.test(r))return s.exec(r)[1];if(l=o.exec(r)){var c="";return(l=[l[1]].concat(function(e,t,n){for(var i=[],a=t.exec(e);a;)i.push(a[n]),a=t.exec(e);return i}(r,o,1))).forEach(function(e){r=r.replace(new RegExp("{{"+e+"}}"),function(){return c=a.deepKeyValue(e,n)})}),this.isObject(c)||this.isFunction(c)?c:r}return"_DIRECT_"===t||"url"===t?r:this.deepKeyValue(r,n)},parseEnumeratorValue:function(e,t,n){var i=null;return this.EumnsMap||(this.EumnsMap=l()),this.isString(e.enumsMap)&&this.EumnsMap&&(i=this.deepKeyValue(e.enumsMap,this.EumnsMap.default)),this.isArray(e.enumsMap)?t=this.parseMapValue(e,t):this.isString(e.enumsMap)&&this.EumnsMap&&this.isArray(i)?t=this.parseMapValue(e,t,i):this.isString(e.enumsMap)&&this.isArray(n.forebearInstance[e.enumsMap])?t=this.parseMapValue(e,t,n.forebearInstance[e.enumsMap]):(this.isString(e.enumsMap)&&!this.EumnsMap&&!this.isArray(n.forebearInstance[e.enumsMap])||this.isString(e.enumsMap)&&this.EumnsMap&&!this.isArray(i)&&!this.isArray(n.forebearInstance[e.enumsMap]))&&this.log("["+e.label+"]列缺失key为["+e.enumsMap+"]的枚举列表","warn"),t},parseFilterValue:function(e,t,n){var i=t;return this.isObject(e.filter)||this.isFunction(e.filter)?i=this.dealFilterFn(this.isFunction(e.filter)?e.filter:e.filter.handler,t,n,e.label,e.filter.params):this.isString(e.filter)&&(i=this.dealFilterFn(e.filter,t,n,e.label)),i},dealFilterFn:function(e,t,n,i,a){var r="",l=[];return a=a||[],l=[t].concat(a,n.row),this.isFunction(e)?r=e.apply(n.forebearInstance,l):this.isString(e)&&this.isFunction(n.forebearInstance[e])?r=n.forebearInstance[e].apply(n.forebearInstance,l):this.isString(e)&&!this.isFunction(n.forebearInstance[e])?(this.log("["+i+"]列需要在当前实例methods里绑定方法名为["+e+"]过滤器","warn"),r=t):r=t,r},parseButtonClickEvent:function(e,t,n){return this.isObject(e.clickEvent)?this.extractClickEvent(e.clickEvent.handler,t,n):this.extractClickEvent(e.clickEvent,t,n)},extractClickEvent:function(e,t,n){return this.dealClickEventFn(e,t,n)?this.isFunction(e)?e:this.isString(e)&&this.isFunction(n.forebearInstance[e])?n.forebearInstance[e]:null:null},dealClickEventFn:function(e,t,n){return this.isFunction(e)||this.isString(e)||this.isObject(e)?!(this.isString(e)&&!this.isFunction(n.forebearInstance[e])||this.isObject(e)&&this.isString(e.handler)&&!this.isFunction(n.forebearInstance[e.handler]))||(this.log("["+t+"]按钮需要在当前实例methods里绑定方法名为["+e+"]的事件","warn"),!1):(this.log("["+t+"]按钮没有绑定上点击事件","warn"),!1)},parseComponentContent:function(e){return this.isObject(e.content)?e.content.component?this.dealComponent(e.content.component):e.content.default?this.dealComponent(e.content.default):this.dealComponent(e.content):this.dealComponent(e.content)},dealComponent:function(e){var t=e;if(this.isString(e)){(e=s()[e])&&e.default&&(e=e.default)}return e||t}},p={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{attrs:{type:this.type,size:this.size}},[this._v(this._s(this.text))])},staticRenderFns:[],props:["type","size","text"]},u={render:function(){var e=this.$createElement;return(this._self._c||e)("el-tag",{attrs:{type:this.type,size:this.size}},[this._v(this._s(this.text))])},staticRenderFns:[],props:["type","size","text"]},h="text",d="link",f="button",m="tag",b="component",y={render:function(e){return"combine"===this.perColumnOption.type?function(e,t){var n=[];return t.perColumnOption.content.forEach(function(i,r){n.push({ele:a(e,t,i),option:i})}),n=n.map(function(t){var n="mtb3";return t.option.span&&(n="vm mr7"),e("div",{attrs:{class:n}},[t.ele])}),e("div",n)}(e,this):a(e,this)},props:{perColumnOption:{type:Object,default:function(){return{}}},row:{type:Object},index:{type:Number},forebearInstance:{type:Object}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tableShow?n("div",{staticClass:"dynamic-table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.tableOption.loading,expression:"tableOption.loading",modifiers:{body:!0}}],ref:"table",attrs:{"element-loading-text":e.tableOption.loadingText,stripe:e.tableOption.stripe,border:e.tableOption.border,fit:e.tableOption.fit,"show-header":e.tableOption.showHeader,"highlight-current-row":e.tableOption.highlightCurrent,"current-row-key":e.tableOption.currentRowKey,"row-class-name":e.tableOption.rowClassName,"row-style":e.tableOption.rowStyle,"empty-text":e.tableOption.emptyText,"default-expand-all":e.tableOption.defaultExpandAll,"expand-row-keys":e.tableOption.expandRowKeys,"default-sort":e.tableOption.defaultSort,"tooltip-effect":e.tableOption.tooltipEffect,"show-summary":e.tableOption.showSummary,"sum-text":e.tableOption.sumText,"summary-method":e.tableOption.summaryMethod,data:e.rowList,height:e.tableOption&&e.tableOption.height||null,"max-height":e.tableOption&&e.tableOption.maxHeight||null},on:{"sort-change":e.handleSortChange,"row-click":e.handleRowClick,"row-dblclick":e.handleRowDbclick,"cell-click":e.handleCellClick,"cell-dblclick":e.handleCellDbclick,"cell-mouse-enter":e.handleCellMouseEnter,"cell-mouse-leave":e.handleCellMouseLeave,"header-click":e.handleHeaderClick,"header-dragend":e.handleHeaderGragend,"current-change":e.handleCurrentChange,expand:e.handleExpand,"selection-change":e.handleSelectionChange}},[e._l(e.columnOptions,function(t,i){return"checkbox"===t.type&&!1!==t.show?n("el-table-column",{key:i,attrs:{type:"selection",fixed:t.fixed||null,width:t.width||55}}):e._e()}),e._v(" "),e._l(e.columnOptions,function(t,i){return"checkbox"!==t.type&&!1!==t.show?n("el-table-column",{key:t.prop,attrs:{type:"component"===t.type&&t.expand?"expand":null,fixed:t.fixed,width:t.width||null,"min-width":t.minWidth||null,prop:t.prop||null,label:t.label||null,sortable:t.sortable,align:t.align||"left","sort-method":t.sortMethod,"show-overflow-tooltip":t.showOverflowTooltip||!1},scopedSlots:e._u([{key:"default",fn:function(a){return"checkbox"!==t.type?["$index"!==t.prop?n("table-cell",{class:t.columnClass,attrs:{forebearInstance:e.parentInstance,index:i,row:a.row,perColumnOption:t}}):e._e(),e._v(" "),"$index"===t.prop?n("span",[e._v("\n                    "+e._s(a.row.$index)+"\n                ")]):e._e()]:void 0}}])}):e._e()})],2),e._v(" "),!1!==e.pagination.show?n("div",{staticClass:"dt-pagination",class:{"align-left":"left"===e.pagination.align,"align-center":"center"===e.pagination.align,"align-right":"right"===e.pagination.align}},[n("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,layout:e.pagination.layout||"total, prev, pager, next",total:e.pagination.total,"page-sizes":e.pagination.pageSizes,small:e.pagination.small},on:{"current-change":e.handlePageChange,"size-change":e.handleSizeChange}})],1):e._e()],1):e._e()},staticRenderFns:[],name:"dynamic-table",data:function(){return{tableShow:!0,parentInstance:null}},props:{checkboxSelected:{type:Array,default:function(){return[]}},tableOption:{type:Object,default:function(){return{}}},columnOptions:{type:Array,default:function(){return[]}},rowList:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{show:!1,currentPage:1,pageSize:10,total:100,align:"left"}}},totalPage:{type:Number,default:100}},watch:{rowList:{handler:function(){var e=this;this.rowList.length&&(this.rowList.map(function(e,t){e.$index=t+1}),this.$nextTick(function(){e.updateCheckboxSelectedList()}))},deep:!0},columnOptions:{handler:function(t,n){var i=this;e(t)!==e(n)&&(this.tableShow=!1,this.$nextTick(function(){i.tableShow=!0}))},deep:!0},checkboxSelected:{handler:function(){this.updateCheckboxSelectedList()},deep:!0},totalPage:function(){this.pagination.total=this.totalPage}},methods:{handlePageChange:function(e){this.$emit("pageChange",e)},handleSizeChange:function(e){this.$emit("sizeChange",e)},clearSelection:function(e){this.$refs.table.clearSelection(e)},toggleRowSelection:function(e,t){this.$refs.table.toggleRowSelection(e,t)},handleRowClick:function(){this.$emit.apply(this,["row-click"].concat(Array.prototype.slice.call(arguments)))},handleRowDbclick:function(){this.$emit.apply(this,["row-dbclick"].concat(Array.prototype.slice.call(arguments)))},handleCellClick:function(){this.$emit.apply(this,["cell-click"].concat(Array.prototype.slice.call(arguments)))},handleCellDbclick:function(){this.$emit.apply(this,["cell-dblclick"].concat(Array.prototype.slice.call(arguments)))},handleHeaderClick:function(){this.$emit.apply(this,["header-click"].concat(Array.prototype.slice.call(arguments)))},handleHeaderGragend:function(){this.$emit.apply(this,["header-dragend"].concat(Array.prototype.slice.call(arguments)))},handleCurrentChange:function(){this.$emit.apply(this,["current-change"].concat(Array.prototype.slice.call(arguments)))},handleExpand:function(){this.$emit.apply(this,["expand"].concat(Array.prototype.slice.call(arguments)))},handleCellMouseEnter:function(){this.$emit.apply(this,["cell-mouse-enter"].concat(Array.prototype.slice.call(arguments)))},handleCellMouseLeave:function(){this.$emit.apply(this,["cell-mouse-leave"].concat(Array.prototype.slice.call(arguments)))},handleSortChange:function(e){this.$emit.apply(this,["sort-change"].concat(Array.prototype.slice.call(arguments)))},handleEvent:function(e){var t=this;return function(){t.$emit.apply(t,[e].concat(Array.prototype.slice.call(arguments)))}},handleSelectionChange:function(e){this.$emit("checkboxSelectChange",e)},updateCheckboxSelectedList:function(){var e=this;if(this.checkboxSelected.length){var t=this.rowList.length;this.checkboxSelected.forEach(function(n){n<=t&&n>0&&(e.$refs.table&&e.$refs.table.toggleRowSelection(e.rowList[n-1]),e.$refs.multipleTable&&e.$refs.multipleTable.toggleRowSelection(e.rowList[n-1]))})}else this.$refs.table&&this.$refs.table.clearSelection(),this.$refs.multipleTable&&this.$refs.multipleTable.clearSelection()}},components:{tableCell:y},mounted:function(){var e=this;this.parentInstance=this.tableOption.instance?this.tableOption.instance:this.$parent,this.updateCheckboxSelectedList(),this.$nextTick(function(){var t=null;e.$refs.table&&(t=e.$refs.table),e.$refs.multipleTable&&(t=e.$refs.multipleTable),e.parentInstance._table=t})}},v={enumerator:l,repository:s,install:function(e,t){e.component("tableGenerator",g),e.prototype.$tableGenerator=function(e){return new e}(e)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(v),v});
